{"ast":null,"code":"import _classCallCheck from \"C:\\\\projetos\\\\seed-dotnet6.0angular13\\\\Seed.Spa.Ui\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\projetos\\\\seed-dotnet6.0angular13\\\\Seed.Spa.Ui\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { Router } from '@angular/router';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { AuthService } from '../common/services/auth.service';\nimport { GlobalServiceCulture } from '../global.service.culture';\nimport { GlobalService } from '../global.service';\nimport { MainService } from './main.service';\nimport { IconSetService } from '@coreui/icons-angular';\nimport { iconSubset } from '../icons/icon-subset';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../common/services/auth.service\";\nimport * as i2 from \"../global.service.culture\";\nimport * as i3 from \"./main.service\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@coreui/icons-angular\";\nimport * as i7 from \"@coreui/angular\";\nimport * as i8 from \"ngx-perfect-scrollbar\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"./default-layout/default-header/default-header.component\";\nimport * as i11 from \"./default-layout/default-footer/default-footer.component\";\n\nfunction MainComponent_c_sidebar_toggler_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"c-sidebar-toggler\", 11);\n  }\n}\n\nexport var MainComponent = /*#__PURE__*/(function () {\n  var MainComponent = /*#__PURE__*/function () {\n    function MainComponent(authService, globalServiceCulture, mainService, sanitizer, router, iconSetService) {\n      var _this = this;\n\n      _classCallCheck(this, MainComponent);\n\n      this.authService = authService;\n      this.globalServiceCulture = globalServiceCulture;\n      this.mainService = mainService;\n      this.sanitizer = sanitizer;\n      this.router = router;\n      this.iconSetService = iconSetService;\n      this.perfectScrollbarConfig = {\n        suppressScrollX: true\n      };\n      this.vm = {};\n      this.menuIsOpen = true;\n      this.vm.generalInfo = this.mainService.getInfosFields();\n      this.vm.downloadUri = GlobalService.getEndPoints().DOWNLOAD;\n      this.vm.avatar = null;\n      this.mainService.updateCulture(this.vm);\n      GlobalService.getChangeCultureEmitter().subscribe(function (culture) {\n        _this.mainService.updateCulture(_this.vm, culture);\n      }); // iconSet singleton\n\n      iconSetService.icons = Object.assign({}, iconSubset);\n    }\n\n    _createClass(MainComponent, [{\n      key: \"onUpdateCulture\",\n      value: function onUpdateCulture(event, culture) {\n        event.preventDefault();\n        this.mainService.updateCulture(this.vm, culture);\n        GlobalService.getChangeCultureEmitter().emit(culture);\n      }\n    }, {\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this2 = this;\n\n        this.logoJson = {\n          src: \"../../assets/img/logo.png\",\n          width: 154,\n          height: 46,\n          alt: this.vm.userName\n        };\n        this.logoJsonLittle = {\n          src: \"../../assets/img/logo_sm.png\",\n          width: 50,\n          height: 20,\n          alt: this.vm.userName\n        };\n        this.authService.getCurrentUser(function (result, firstTime) {\n          if (result.isAuth) {\n            if (result.claims.name != null) {\n              _this2.vm.userName = result.claims.name;\n            }\n\n            if (result.claims.role != null) {\n              _this2.vm.userRole = result.claims.role;\n            }\n\n            if (result.claims.tools != null) {\n              _this2.vm.menu = _this2.mainService.transformTools(result.claims.tools);\n            }\n\n            if (result.claims.avatar != null) {\n              _this2.vm.avatar = result.claims.avatar;\n            }\n\n            if (result.claims.typerole != null) {\n              _this2.vm.typerole = result.claims.typerole;\n              _this2.vm.userRole = _this2.vm.userRole + \"- [\" + _this2.vm.typerole + \"]\";\n            }\n\n            if (firstTime) _this2.router.navigate([\"/home\"]);\n          }\n        });\n      }\n    }, {\n      key: \"onToggleMenu\",\n      value: function onToggleMenu(e) {\n        this.menuIsOpen = !this.menuIsOpen;\n      }\n    }, {\n      key: \"onLogout\",\n      value: function onLogout(e) {\n        var _this3 = this;\n\n        e.preventDefault();\n        var conf = GlobalService.operationExecutedParameters(\"confirm-modal\", function () {\n          _this3.mainService.resetCulture();\n\n          _this3.authService.logout();\n        }, \"Deseja Realmente Sair do Sistema\");\n        GlobalService.getOperationExecutedEmitter().emit(conf);\n      }\n    }, {\n      key: \"onFilter\",\n      value: function onFilter(filter) {}\n    }]);\n\n    return MainComponent;\n  }();\n\n  MainComponent.ɵfac = function MainComponent_Factory(t) {\n    return new (t || MainComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.GlobalServiceCulture), i0.ɵɵdirectiveInject(i3.MainService), i0.ɵɵdirectiveInject(i4.DomSanitizer), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i6.IconSetService));\n  };\n\n  MainComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MainComponent,\n    selectors: [[\"app-dashboard\"]],\n    features: [i0.ɵɵProvidersFeature([GlobalServiceCulture, MainService])],\n    decls: 13,\n    vars: 6,\n    consts: [[\"id\", \"sidebar\", \"visible\", \"\", 1, \"d-print-none\", \"sidebar\", \"sidebar-fixed\"], [\"sidebar\", \"cSidebar\"], [\"routerLink\", \"./\", 3, \"brandFull\", \"brandNarrow\"], [3, \"config\"], [3, \"navItems\"], [\"toggle\", \"unfoldable\", \"cSidebarToggle\", \"sidebar\", 4, \"ngIf\"], [1, \"main\"], [1, \"wrapper\", \"d-flex\", \"flex-column\", \"min-vh-100\", \"bg-light\", \"dark:bg-transparent\"], [1, \"body\", \"flex-grow-1\", \"px-3\"], [\"breakpoint\", \"lg\", 1, \"h-auto\"], [\"position\", \"sticky\", \"sidebarId\", \"sidebar\", 1, \"mb-4\", \"d-print-none\", \"header\", \"header-sticky\", 3, \"vm\", \"logout\"], [\"toggle\", \"unfoldable\", \"cSidebarToggle\", \"sidebar\"]],\n    template: function MainComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"c-sidebar\", 0, 1);\n        i0.ɵɵelement(2, \"c-sidebar-brand\", 2);\n        i0.ɵɵelementStart(3, \"perfect-scrollbar\", 3);\n        i0.ɵɵelement(4, \"c-sidebar-nav\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, MainComponent_c_sidebar_toggler_5_Template, 1, 0, \"c-sidebar-toggler\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"main\", 6)(7, \"div\", 7)(8, \"div\", 8)(9, \"c-container\", 9)(10, \"app-default-header\", 10);\n        i0.ɵɵlistener(\"logout\", function MainComponent_Template_app_default_header_logout_10_listener($event) {\n          return ctx.onLogout($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"router-outlet\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(12, \"app-default-footer\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        var _r0 = i0.ɵɵreference(1);\n\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"brandFull\", ctx.logoJson)(\"brandNarrow\", ctx.logoJsonLittle);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"config\", ctx.perfectScrollbarConfig);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"navItems\", ctx.vm.menu);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !_r0.narrow);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"vm\", ctx.vm);\n      }\n    },\n    directives: [i7.SidebarComponent, i7.SidebarBrandComponent, i5.RouterLink, i8.PerfectScrollbarComponent, i7.SidebarNavComponent, i9.NgIf, i7.SidebarTogglerComponent, i7.SidebarToggleDirective, i7.ContainerComponent, i10.DefaultHeaderComponent, i5.RouterOutlet, i11.DefaultFooterComponent],\n    styles: [\"\"]\n  });\n  return MainComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}