{"ast":null,"code":"import _classCallCheck from \"C:\\\\projetos\\\\seed-dotnet6.0angular13\\\\Seed.Spa.Ui\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\projetos\\\\seed-dotnet6.0angular13\\\\Seed.Spa.Ui\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { ElementRef, EventEmitter, SimpleChanges } from '@angular/core';\nimport { NgModel } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nexport var NestableDirective = /*#__PURE__*/(function () {\n  var NestableDirective = /*#__PURE__*/function () {\n    function NestableDirective(el, ngModel) {\n      _classCallCheck(this, NestableDirective);\n\n      this.el = el;\n      this.ngModel = ngModel;\n      this.change = new EventEmitter();\n      this.initilialized = false;\n    }\n\n    _createClass(NestableDirective, [{\n      key: \"ngOnChanges\",\n      value: function ngOnChanges(changes) {\n        this.init();\n      }\n    }, {\n      key: \"ngOnInit\",\n      value: function ngOnInit() {}\n    }, {\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        var element = $(this.el.nativeElement);\n        $.each(this.data, function (index, item) {\n          $(element).find(\".root\").append(_this.buildItem(item));\n        });\n\n        if (!this.initilialized) {\n          $(element).nestable({\n            group: 1\n          }).on('change', function (e) {\n            var element = e.length ? e : $(e.target);\n            var e = element.nestable('serialize');\n            var result = e.map(function (item) {\n              return {\n                id: item.id,\n                aditional: JSON.parse(unescape(item.aditional))\n              };\n            });\n\n            _this.change.emit(result);\n          });\n        }\n\n        this.initilialized = true;\n      }\n    }, {\n      key: \"buildItem\",\n      value: function buildItem(item) {\n        var _this2 = this;\n\n        var html = \"<li class='dd-item' data-id='\" + item.id + \"' data-aditional='\" + escape(JSON.stringify(item.dataAditional)) + \"'>\";\n        html += \"<div class='dd-handle'>\" + item.name + \"</div>\";\n\n        if (item.children) {\n          html += \"<ol class='dd-list'>\";\n          $.each(item.children, function (index, children) {\n            html += _this2.buildItem(children);\n          });\n          html += \"</ol>\";\n        }\n\n        html += \"</li>\";\n        return html;\n      }\n    }]);\n\n    return NestableDirective;\n  }();\n\n  NestableDirective.ɵfac = function NestableDirective_Factory(t) {\n    return new (t || NestableDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.NgModel));\n  };\n\n  NestableDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: NestableDirective,\n    selectors: [[\"\", \"nestable\", \"\"]],\n    inputs: {\n      data: [\"nestable\", \"data\"]\n    },\n    outputs: {\n      change: \"change\"\n    },\n    features: [i0.ɵɵProvidersFeature([NgModel]), i0.ɵɵNgOnChangesFeature]\n  });\n  return NestableDirective;\n})();","map":null,"metadata":{},"sourceType":"module"}