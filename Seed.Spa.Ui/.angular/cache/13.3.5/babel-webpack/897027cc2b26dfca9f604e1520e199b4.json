{"ast":null,"code":"import _classCallCheck from \"C:\\\\projetos\\\\seed-dotnet6.0angular13\\\\Seed.Spa.Ui\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\projetos\\\\seed-dotnet6.0angular13\\\\Seed.Spa.Ui\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { Router } from '@angular/router';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { AuthService } from '../common/services/auth.service';\nimport { GlobalServiceCulture } from '../global.service.culture';\nimport { GlobalService } from '../global.service';\nimport { MainService } from './main.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../common/services/auth.service\";\nimport * as i2 from \"../global.service.culture\";\nimport * as i3 from \"./main.service\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"@angular/router\";\n\nfunction MainComponent_ng_template_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 24);\n  }\n}\n\nvar _c0 = function _c0() {\n  return [\"/home\"];\n};\n\nvar _c1 = function _c1() {\n  return {\n    src: \"assets/img/logo.png\",\n    width: 150,\n    height: 40,\n    alt: \"Seed\"\n  };\n};\n\nvar _c2 = function _c2() {\n  return {\n    src: \"assets/img/logo_sm.png\",\n    width: 40,\n    height: 40,\n    alt: \"Seed\"\n  };\n};\n\nexport var MainComponent = /*#__PURE__*/(function () {\n  var MainComponent = /*#__PURE__*/function () {\n    function MainComponent(authService, globalServiceCulture, mainService, sanitizer, router) {\n      var _this = this;\n\n      _classCallCheck(this, MainComponent);\n\n      this.authService = authService;\n      this.globalServiceCulture = globalServiceCulture;\n      this.mainService = mainService;\n      this.sanitizer = sanitizer;\n      this.router = router;\n      this.vm = {};\n      this.menuIsOpen = true;\n      this.vm.generalInfo = this.mainService.getInfosFields();\n      this.vm.downloadUri = GlobalService.getEndPoints().DOWNLOAD;\n      this.vm.avatar = null;\n      this.mainService.updateCulture(this.vm);\n      GlobalService.getChangeCultureEmitter().subscribe(function (culture) {\n        _this.mainService.updateCulture(_this.vm, culture);\n      });\n    }\n\n    _createClass(MainComponent, [{\n      key: \"onUpdateCulture\",\n      value: function onUpdateCulture(event, culture) {\n        event.preventDefault();\n        this.mainService.updateCulture(this.vm, culture);\n        GlobalService.getChangeCultureEmitter().emit(culture);\n      }\n    }, {\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this2 = this;\n\n        this.authService.getCurrentUser(function (result, firstTime) {\n          if (result.isAuth) {\n            if (result.claims.name != null) {\n              _this2.vm.userName = result.claims.name;\n            }\n\n            if (result.claims.role != null) {\n              _this2.vm.userRole = result.claims.role;\n            }\n\n            if (result.claims.tools != null) {\n              _this2.vm.menu = _this2.mainService.transformTools(result.claims.tools);\n            }\n\n            if (result.claims.avatar != null) {\n              _this2.vm.avatar = result.claims.avatar;\n            }\n\n            if (result.claims.typerole != null) {\n              _this2.vm.typerole = result.claims.typerole;\n              _this2.vm.userRole = _this2.vm.userRole + \"- [\" + _this2.vm.typerole + \"]\";\n            }\n\n            if (firstTime) _this2.router.navigate([\"/home\"]);\n          }\n        });\n      }\n    }, {\n      key: \"onToggleMenu\",\n      value: function onToggleMenu(e) {\n        this.menuIsOpen = !this.menuIsOpen;\n      }\n    }, {\n      key: \"onLogout\",\n      value: function onLogout(e) {\n        var _this3 = this;\n\n        e.preventDefault();\n        var conf = GlobalService.operationExecutedParameters(\"confirm-modal\", function () {\n          _this3.mainService.resetCulture();\n\n          _this3.authService.logout();\n        }, \"Deseja Realmente Sair do Sistema\");\n        GlobalService.getOperationExecutedEmitter().emit(conf);\n      }\n    }, {\n      key: \"onFilter\",\n      value: function onFilter(filter) {}\n    }]);\n\n    return MainComponent;\n  }();\n\n  MainComponent.ɵfac = function MainComponent_Factory(t) {\n    return new (t || MainComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.GlobalServiceCulture), i0.ɵɵdirectiveInject(i3.MainService), i0.ɵɵdirectiveInject(i4.DomSanitizer), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  MainComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MainComponent,\n    selectors: [[\"app-dashboard\"]],\n    features: [i0.ɵɵProvidersFeature([GlobalServiceCulture, MainService])],\n    decls: 44,\n    vars: 20,\n    consts: [[3, \"navbarBrandRouterLink\", \"fixed\", \"navbarBrandFull\", \"navbarBrandMinimized\", \"sidebarToggler\"], [1, \"nav\", \"navbar-nav\", \"ml-auto\"], [\"dropdown\", \"\", \"placement\", \"bottom right\", 1, \"nav-item\", \"dropdown\"], [1, \"hidden-xs\", \"mr-1\"], [\"routerLink\", \"/profile\", \"title\", \"Meu perfil\"], [3, \"folderAvatar\", \"vm\"], [\"title\", \"Sair\", 1, \"btn\", 3, \"click\"], [1, \"fas\", \"fa-sign-out-alt\"], [1, \"app-body\"], [3, \"fixed\", \"display\"], [3, \"navItems\", \"perfectScrollbar\"], [1, \"main\"], [1, \"breadcrumb\"], [1, \"breadcrumb-menu\", \"d-md-down-none\"], [\"role\", \"group\", \"aria-label\", \"Button group with nested dropdown\", 1, \"btn-group\"], [\"tabHeading\", \"\"], [1, \"list-group\", \"list-group-accent\"], [1, \"list-group-item\", \"list-group-item-accent-secondary\", \"bg-light\", \"text-center\", \"font-weight-bold\", \"text-muted\", \"text-uppercase\", \"small\"], [1, \"list-group-item\", \"list-group-item-accent-warning\", \"list-group-item-divider\"], [1, \"avatar\", \"float-right\"], [1, \"text-muted\", \"mr-3\"], [1, \"text-muted\"], [\"href\", \"#\", \"title\", \"Sair\", 1, \"nav-link\", 3, \"click\"], [\"href\", \"#\"], [1, \"icon-list\"]],\n    template: function MainComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-header\", 0)(1, \"ul\", 1)(2, \"li\", 2)(3, \"span\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"a\", 4);\n        i0.ɵɵelement(6, \"app-avatar\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"a\", 6);\n        i0.ɵɵlistener(\"click\", function MainComponent_Template_a_click_7_listener($event) {\n          return ctx.onLogout($event);\n        });\n        i0.ɵɵelement(8, \"i\", 7);\n        i0.ɵɵtext(9, \"Sair \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(10, \"div\", 8)(11, \"app-sidebar\", 9);\n        i0.ɵɵelement(12, \"app-sidebar-nav\", 10)(13, \"app-sidebar-minimizer\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"main\", 11)(15, \"ol\", 12);\n        i0.ɵɵelement(16, \"app-breadcrumb\");\n        i0.ɵɵelementStart(17, \"li\", 13);\n        i0.ɵɵelement(18, \"div\", 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(19, \"router-outlet\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"app-aside\", 9)(21, \"tabset\")(22, \"tab\");\n        i0.ɵɵtemplate(23, MainComponent_ng_template_23_Template, 1, 0, \"ng-template\", 15);\n        i0.ɵɵelementStart(24, \"div\", 16)(25, \"div\", 17);\n        i0.ɵɵtext(26, \"Profile\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 18)(28, \"div\", 19);\n        i0.ɵɵelement(29, \"app-avatar\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\")(31, \"strong\");\n        i0.ɵɵtext(32);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(33, \"small\", 20);\n        i0.ɵɵtext(34);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"small\", 21)(36, \"a\", 22);\n        i0.ɵɵlistener(\"click\", function MainComponent_Template_a_click_36_listener($event) {\n          return ctx.onLogout($event);\n        });\n        i0.ɵɵelement(37, \"i\", 7);\n        i0.ɵɵtext(38, \" Sair\");\n        i0.ɵɵelementEnd()()()()()()()();\n        i0.ɵɵelementStart(39, \"app-footer\")(40, \"span\")(41, \"a\", 23);\n        i0.ɵɵtext(42, \"Target Software\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(43, \" \\xA9 2018.\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"navbarBrandRouterLink\", i0.ɵɵpureFunction0(17, _c0))(\"fixed\", true)(\"navbarBrandFull\", i0.ɵɵpureFunction0(18, _c1))(\"navbarBrandMinimized\", i0.ɵɵpureFunction0(19, _c2))(\"sidebarToggler\", \"lg\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.vm.userName);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"folderAvatar\", \"usuario\")(\"vm\", ctx.vm);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"fixed\", true)(\"display\", \"lg\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"navItems\", ctx.vm.menu);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"fixed\", true)(\"display\", false);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"folderAvatar\", \"usuario\")(\"vm\", ctx.vm);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.vm.userName);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.vm.userRole, \" \");\n      }\n    },\n    styles: [\"\"]\n  });\n  return MainComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}